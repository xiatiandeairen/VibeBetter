# VibeBetter v0.5.0 版本展望

> 三个视角的深度分析：用户痛点驱动、行业专家评审、成熟软件标准对齐。

---

## 一、用户痛点视角

### 1.1 当前产品解决了什么

VibeBetter v0.4 已经建立了完整的「采集 → 计算 → 可视化 → 决策」链路：

| 痛点                            | 解决程度 | 说明                                    |
| ------------------------------- | -------- | --------------------------------------- |
| AI 编码到底有没有用             | ★★★★☆   | AI Success/Stable Rate 有清晰量化       |
| 哪些文件风险最高                | ★★★★☆   | PSRI + 热点检测 + 下钻                  |
| 该不该继续用 AI 写某个模块      | ★★★☆☆   | 决策引擎给建议，但粒度不够细（模块级）  |
| AI 引入了多少技术债             | ★★★☆☆   | TDI 指标有，但无法归因到「哪些债是 AI 产生的」|
| 团队里谁用 AI 效果最好          | ★☆☆☆☆   | 缺乏开发者维度分析                      |

### 1.2 用户仍然痛的地方

#### 痛点 1：「我知道 AI Success Rate 是 84%，但 so what？」

**问题**：指标有了，但缺少**可操作的上下文**。用户看到 84% 后不知道：
- 行业平均水平是多少？我算好还是差？
- 哪些类型的 PR 拉低了成功率？
- 下一步具体该做什么？

**v0.5 方向**：
- 引入**行业基准线**（Benchmark）—— 即使是估算值也比没有强
- 决策建议从「建议扩大 AI 使用」细化到「建议在 `src/services/` 目录扩大 AI 使用，该目录 AI 成功率 95%，高于项目平均」
- 增加**归因分析**：哪些 PR 失败了？失败原因是什么？（大修改 vs 回滚 vs Review 轮数多）

#### 痛点 2：「数据是静态的，我要实时感知」

**问题**：用户必须手动点「Refresh」或「Compute」才能看到最新数据。没有主动推送。

**v0.5 方向**：
- **Webhook 已就绪**（v0.4），下一步让 Webhook 触发后的结果**实时推送到 Dashboard**（SSE / WebSocket）
- PR 提交时 **30 秒内** 在 GitHub PR 页面显示风险评分（GitHub Check API）
- 指标异常时**主动通知**（Slack/邮件/浏览器通知）

#### 痛点 3：「我管 5 个项目，每个都要切换看，太累了」

**问题**：当前是单项目视角，没有跨项目概览。

**v0.5 方向**：
- **组织级 Dashboard**：一个页面看所有项目的健康状态
- 项目间**对比矩阵**：哪个项目 AI 效果最好？哪个技术债最高？
- **团队排行榜**：开发者维度的 AI 使用效果对比（非考核，用于发现最佳实践）

#### 痛点 4：「接入太复杂，我不想手动配置」

**问题**：用户需要手动注册、创建项目、配置 GitHub Token、触发采集。

**v0.5 方向**：
- **OAuth 激活**：GitHub 登录后自动列出用户的仓库，一键导入
- **零配置采集**：选择仓库后自动开始，无需手动触发
- **引导流程（Onboarding）**：首次使用的分步引导

---

## 二、行业专家视角

### 2.1 与竞品的差距分析

| 能力维度          | VibeBetter v0.4 | SonarQube | LinearB | Sleuth | Swarmia |
| ----------------- | --------------- | --------- | ------- | ------ | ------- |
| 代码质量静态分析  | ★★☆☆☆          | ★★★★★    | ★★☆☆☆  | ★☆☆☆☆ | ★☆☆☆☆  |
| AI 编码洞察       | ★★★★☆          | ☆☆☆☆☆    | ★☆☆☆☆  | ☆☆☆☆☆ | ☆☆☆☆☆  |
| 工程效能度量      | ★★★☆☆          | ★★☆☆☆    | ★★★★★  | ★★★★☆ | ★★★★★  |
| 实时数据          | ★★☆☆☆          | ★★★★☆    | ★★★★☆  | ★★★★★ | ★★★★☆  |
| 团队/组织级分析   | ☆☆☆☆☆          | ★★★☆☆    | ★★★★★  | ★★★☆☆ | ★★★★★  |
| 集成生态          | ★★☆☆☆          | ★★★★★    | ★★★★☆  | ★★★★★ | ★★★★☆  |
| 开箱即用          | ★★☆☆☆          | ★★★★☆    | ★★★★★  | ★★★★★ | ★★★★★  |

### 2.2 VibeBetter 的护城河

VibeBetter 在 **AI Coding 洞察** 这个垂直方向上有独特优势：

1. **AI 成果率量化**：没有竞品提供 AI Success Rate / Stable Rate
2. **AI 行为追踪**：工具采纳率、编辑距离、多工具对比
3. **AI 归因分析**（v0.5 新增）：哪些技术债是 AI 引入的
4. **AI 决策建议**：基于 AI 使用数据的模块级建议

### 2.3 专家建议的 v0.5 方向

| 方向                    | 优先级 | 理由                                                  |
| ----------------------- | ------ | ----------------------------------------------------- |
| **AI 归因分析**         | P0     | 核心差异化 — 无人做过「AI 引入的技术债有多少」         |
| **GitHub Check 回写**   | P0     | 让用户在 GitHub PR 页面直接看到风险评分 = 即时价值     |
| **组织级 Dashboard**    | P1     | 从个人工具变成团队工具，扩大用户基数和付费意愿         |
| **开发者效能排行**      | P1     | 对标 LinearB/Swarmia，但聚焦 AI 使用维度              |
| **Onboarding 引导流程** | P1     | 降低首次使用门槛 = 提高转化率                         |
| **Slack/邮件通知**      | P2     | 被动消费（Push）比主动查看（Pull）留存率高 3-5 倍     |

---

## 三、成熟软件视角

### 3.1 产品化差距

一个「成熟」的 SaaS 产品需要什么 VibeBetter 还没有的：

| 层面         | 成熟标准                                    | VibeBetter 现状            | v0.5 目标              |
| ------------ | ------------------------------------------- | -------------------------- | ---------------------- |
| **认证**     | OAuth SSO + MFA + SAML                      | JWT + OAuth 代码就绪       | OAuth 激活 + MFA       |
| **多租户**   | 组织 → 团队 → 项目 三级隔离                 | 用户 → 项目 两级           | 组织级                 |
| **权限**     | RBAC + 细粒度 API 权限                      | 基础 RBAC（Admin/Viewer）  | 组织 Admin/Member/Guest |
| **计费**     | 免费版 / Pro / Enterprise                   | 无                         | 暂不实现               |
| **可观测性** | 结构化日志 + Metrics + Tracing + 告警       | Pino 日志                  | 添加 Prometheus 指标   |
| **CI/CD**    | 自动化测试 + 部署流水线 + 灰度              | 无 CI pipeline             | GitHub Actions CI      |
| **文档**     | API 文档 + 用户手册 + FAQ + 社区            | README + 内部文档          | OpenAPI + 用户文档     |
| **数据保护** | GDPR 合规 + 数据加密 + 审计日志             | 无                         | 审计日志               |

### 3.2 工程质量差距

| 维度           | 成熟标准                    | VibeBetter 现状         | v0.5 目标         |
| -------------- | --------------------------- | ----------------------- | ----------------- |
| 测试覆盖率     | > 80% 单元 + 集成 + E2E    | 45 个测试（~30% 覆盖）  | 100+ 测试 (~60%) |
| 性能基准       | API < 100ms p95             | 未度量                  | k6 负载测试       |
| 错误追踪       | Sentry / Datadog            | console.error + Pino    | Sentry 集成       |
| 数据库迁移     | Versioned migrations        | `db push`（无版本控制） | Prisma migrate    |
| 代码质量门禁   | PR 自动检查（lint+test+覆盖率）| 手动                  | GitHub Actions    |

### 3.3 v0.5 路线建议（成熟化路径）

```
v0.5 Phase A: 核心价值深化
├── AI 归因分析（AI 引入的技术债追踪）
├── GitHub Check 回写（PR 页面风险评分）
├── 组织级 Dashboard（多项目概览）
└── 开发者效能排行

v0.5 Phase B: 产品化
├── OAuth 激活（一键 GitHub 登录）
├── Onboarding 引导流程
├── Slack 通知集成
└── OpenAPI 文档自动生成

v0.5 Phase C: 工程质量
├── GitHub Actions CI/CD
├── Prisma versioned migrations
├── 100+ 测试（包含 E2E）
└── Sentry 错误追踪
```

---

## 四、v0.5 特性清单

### P0：核心差异化

| #    | 特性                      | 说明                                                       | 预估 |
| ---- | ------------------------- | ---------------------------------------------------------- | ---- |
| V5-01 | **AI 归因分析**          | 追踪 AI 修改的文件的复杂度变化趋势，区分 AI 引入 vs 人工引入的技术债 | 3d   |
| V5-02 | **GitHub Check 回写**    | PR 提交时计算风险评分，作为 GitHub Check 回写到 PR 页面      | 2d   |
| V5-03 | **组织级 Dashboard**     | 一个页面看所有项目健康状态，项目间对比矩阵                  | 3d   |

### P1：用户体验闭环

| #    | 特性                      | 说明                                                       | 预估 |
| ---- | ------------------------- | ---------------------------------------------------------- | ---- |
| V5-04 | **开发者效能排行**       | 按开发者维度分析 AI 使用效果（成功率、采纳率）             | 2d   |
| V5-05 | **Onboarding 引导**      | 首次登录后的分步引导（连接 GitHub → 选仓库 → 查看洞察）    | 2d   |
| V5-06 | **行业基准线**           | AI 成功率/PSRI 的行业参考值，让用户知道自己处在什么位置    | 1d   |
| V5-07 | **失败 PR 归因**         | 分析失败 PR 的原因分布（大修改/回滚/Review 轮数多）        | 1.5d |

### P2：集成与通知

| #    | 特性                      | 说明                                                       | 预估 |
| ---- | ------------------------- | ---------------------------------------------------------- | ---- |
| V5-08 | **Slack 通知**           | 指标异常时推送到 Slack channel                             | 2d   |
| V5-09 | **OAuth 激活**           | GITHUB_CLIENT_ID 配置后自动列出用户仓库一键导入            | 1d   |
| V5-10 | **OpenAPI 文档**         | Hono OpenAPI 插件自动生成 API 文档                         | 1d   |

### P3：工程质量

| #    | 特性                      | 说明                                                       | 预估 |
| ---- | ------------------------- | ---------------------------------------------------------- | ---- |
| V5-11 | **GitHub Actions CI**    | lint + test + build 自动化流水线                           | 1d   |
| V5-12 | **Prisma Migrations**    | 从 `db push` 迁移到版本化的 `prisma migrate`               | 1d   |
| V5-13 | **E2E 测试**             | Playwright 覆盖核心路径（登录 → Dashboard → 决策）         | 3d   |
| V5-14 | **Sentry 错误追踪**      | 前后端异常自动上报                                         | 1d   |

---

## 五、产品分化展望

v0.5 完成后，VibeBetter 的核心引擎（采集 → 指标 → 分析 → 建议）已足够通用，可分化为：

```
VibeBetter (AI Coding Insight)
    │
    ├── VibeDev   (Developer Velocity Insight)  — 团队效能
    ├── VibeOps   (DevOps Insight)              — 部署与运维
    ├── VibeSec   (Security Insight)            — 安全态势
    └── VibeQA    (Quality Insight)             — 代码质量
```

分化策略：共享底层引擎（Collector + Metrics Engine + Decision Engine），每个子产品只定义：
1. **采集什么**（新 Collector Adapter）
2. **算什么**（新 Metric 公式）
3. **展示什么**（新 Dashboard 页面）

这让每个子产品的开发成本从「从零建设」降低到「定义配置 + 前端页面」。

---

## 六、评分目标

| 维度           | v0.4 现状 | v0.5 目标 | 关键路径                         |
| -------------- | --------- | --------- | -------------------------------- |
| 功能完成度     | 9/10      | 9.5/10    | 归因分析 + 组织级 + Check 回写   |
| 代码质量       | 7.5/10    | 8.5/10    | E2E + CI/CD + Migrations         |
| 架构合理性     | 8/10      | 8.5/10    | 事件驱动 + 组织级多租户          |
| 用户体验       | 8/10      | 9/10      | Onboarding + 通知 + 基准线       |
| 安全性         | 6/10      | 7.5/10    | OAuth 激活 + Refresh Token + 审计|
| 性能           | 7/10      | 8/10      | Redis 缓存 + 查询优化            |
| 文档完备度     | 8.5/10    | 9/10      | OpenAPI + 用户手册               |
| 协作效率       | 9/10      | 9/10      | 保持                             |
| **综合目标**   | **7.85**  | **8.6+**  |                                  |
