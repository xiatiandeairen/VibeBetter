# VibeBetter v0.6.0 版本展望

## 版本主题

> **从工具到产品**：让真实用户在 5 分钟内获得第一个 AI Coding 洞察。

---

## 一、为什么是这个方向

### 回顾 v0.1–v0.5 做了什么

| 版本   | 关键词         | 解决的问题                    |
| ------ | -------------- | ----------------------------- |
| v0.1   | 链路通         | 能采集、能计算、能看           |
| v0.2   | 闭环           | 能看到决策建议和 AI 洞察       |
| v0.3   | 精致           | 交互体验、配置能力、正向反馈   |
| v0.4   | 深度           | 下钻、对比、安全、多维分析     |
| v0.5   | 洞察           | AI 归因、组织视角、行业定位    |

### v0.6 要解决的核心问题

**问题：产品功能丰富（20 个页面），但新用户无法「开箱即用」。**

具体表现：
1. 用户需要手动注册、配置 GitHub Token、创建项目、触发采集 — 摩擦太大
2. 没有引导流程告诉用户「接下来该看什么」
3. API 没有文档，第三方集成困难
4. 没有真实的错误追踪，线上问题靠猜
5. 数据库 schema 变更用 `db push`，生产环境不可用

---

## 二、特性清单

### P0：用户首次体验（First 5 Minutes）

| #     | 特性                     | 说明                                                         | 预估 |
| ----- | ------------------------ | ------------------------------------------------------------ | ---- |
| V6-01 | **Onboarding 引导流程**  | 首次登录后分步引导：① 连接仓库 ② 等待采集 ③ 查看洞察 ④ 设置权重 | 3d   |
| V6-02 | **项目导入向导**         | 输入 GitHub URL → 自动检测仓库信息 → 一键创建 + 采集          | 2d   |
| V6-03 | **首次洞察摘要**         | 采集完成后生成一份「AI Coding 健康报告」PDF/页面              | 2d   |

### P1：开发者体验（Developer Experience）

| #     | 特性                     | 说明                                                         | 预估 |
| ----- | ------------------------ | ------------------------------------------------------------ | ---- |
| V6-04 | **OpenAPI 文档**         | 基于 Hono 路由自动生成 Swagger UI，挂载在 `/api/docs`         | 1d   |
| V6-05 | **API Key 认证**         | 除 JWT 外支持 API Key，方便 CI/CD 集成和脚本调用              | 1d   |
| V6-06 | **Webhook 配置 UI**      | 在 Settings 页面显示 Webhook URL + 生成 Secret + 测试按钮     | 1.5d |

### P2：可靠性（Reliability）

| #     | 特性                     | 说明                                                         | 预估 |
| ----- | ------------------------ | ------------------------------------------------------------ | ---- |
| V6-07 | **Prisma 版本化迁移**    | 从 `db push` 迁移到 `prisma migrate`，生产级数据库管理        | 1d   |
| V6-08 | **Sentry 错误追踪**      | 前端 + 后端异常自动上报到 Sentry                              | 1d   |
| V6-09 | **E2E 测试**             | Playwright 覆盖：登录 → Dashboard → 决策 → Settings          | 3d   |
| V6-10 | **Redis 缓存层**         | 高频查询缓存（overview、snapshots），TTL 5 分钟               | 1d   |

### P3：生态与分化

| #     | 特性                     | 说明                                                         | 预估 |
| ----- | ------------------------ | ------------------------------------------------------------ | ---- |
| V6-11 | **插件化 Dashboard**     | Dashboard 页面配置化：用户可选择显示哪些指标卡片/图表        | 2d   |
| V6-12 | **Insight 模板引擎**     | 定义 Insight 配置（采集源 + 指标 + 展示），为产品分化做准备   | 3d   |
| V6-13 | **VS Code 扩展骨架**     | VS Code 扩展项目骨架，可向后端上报 AI 行为数据                | 2d   |

---

## 三、架构演进

### v0.5 → v0.6 变化

```
v0.5                                    v0.6
──────                                  ──────
手动创建项目                        →    项目导入向导 + Onboarding
db push                             →    prisma migrate (版本化)
console.error + Pino                →    Pino + Sentry
无 API 文档                         →    Swagger UI at /api/docs
JWT only                            →    JWT + API Key
无缓存                              →    Redis 缓存 (overview/snapshots)
硬编码 Dashboard                    →    插件化可配置 Dashboard
```

---

## 四、评分目标

| 维度           | v0.5 现状 | v0.6 目标 | 关键路径                           |
| -------------- | --------- | --------- | ---------------------------------- |
| 功能完成度     | 9.5/10    | 9.5/10    | 保持（Onboarding 提升可用性非功能）|
| 代码质量       | 7.5/10    | **9/10**  | E2E + Prisma migrate + 缓存测试   |
| 架构合理性     | 8/10      | **9/10**  | 插件化 Dashboard + Insight 模板    |
| 用户体验       | 8.5/10    | **9.5/10**| Onboarding + 导入向导 + 首次报告   |
| 安全性         | 6/10      | **7/10**  | API Key + Sentry + 审计日志        |
| 性能           | 7/10      | **8/10**  | Redis 缓存层                       |
| 文档完备度     | 9/10      | **9.5/10**| OpenAPI + Webhook 配置文档         |
| 协作效率       | 9/10      | 9/10      | 保持                               |
| **综合目标**   | **8.2**   | **8.9+**  |                                    |

---

## 五、产品分化路径

v0.6 的核心架构改进（插件化 Dashboard + Insight 模板引擎）为后续产品分化打基础：

```
v0.6: 基础引擎
  └── Insight Template = { collectors, metrics, dashboard_config }

v0.7+: 产品分化
  ├── VibeBetter    (AI Coding Insight)     — 当前产品
  ├── VibeReview    (Code Review Insight)   — Review 效率 + 知识分布
  ├── VibeVelocity  (Team Velocity Insight) — 吞吐量 + Lead Time
  └── VibeSec       (Security Insight)      — 漏洞密度 + 依赖风险
```

每个子产品只需定义一个 Insight 配置文件 + 自定义 Dashboard 页面，底层引擎全部复用。

---

## 六、里程碑

| 里程碑         | 交付                                    | Gate 标准                              |
| -------------- | --------------------------------------- | -------------------------------------- |
| **v0.6-alpha** | Onboarding + 导入向导 + 首次报告        | 新用户 5 分钟内看到第一个洞察          |
| **v0.6-beta**  | OpenAPI + API Key + Webhook UI + 缓存   | API 文档可访问 + 缓存命中率 > 80%      |
| **v0.6-rc**    | E2E + Sentry + Prisma migrate + 插件化  | E2E 覆盖核心路径 + 0 未处理异常        |
